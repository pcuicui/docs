(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{381:function(v,_,e){"use strict";e.r(_);var t=e(46),s=Object(t.a)({},(function(){var v=this,_=v.$createElement,e=v._self._c||_;return e("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[e("h1",{attrs:{id:"web-性能优化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#web-性能优化"}},[v._v("#")]),v._v(" web 性能优化")]),v._v(" "),e("p",[v._v("可以从哪些方面来说呢？")]),v._v(" "),e("ol",[e("li",[v._v("编码\n"),e("ol",[e("li",[v._v("react 上的：pureComponent、React.memo、shouldComponentUpdate、key")]),v._v(" "),e("li",[v._v("图片懒加载")])])]),v._v(" "),e("li",[v._v("浏览器\n"),e("ol",[e("li",[v._v("浏览器缓存")]),v._v(" "),e("li",[v._v("减少请求数：\njs、css放到html中\n用js实现图片异步加载或懒加载\n小图片使用data-uri")]),v._v(" "),e("li",[v._v("减少传输体积\n控制图片清晰度\n设计上避免大型背景图")]),v._v(" "),e("li",[v._v("回流与重绘\n"),e("ol",[e("li",[v._v("重绘：样式改变，color等")]),v._v(" "),e("li",[v._v("回流：涉及到页面布局的更新，一个节点的回流可能会导致其子节点、随后节点、祖先节点的回流")])])])])]),v._v(" "),e("li",[v._v("构建打包\n"),e("ol",[e("li",[v._v("tree-shaking")]),v._v(" "),e("li",[v._v("分包")]),v._v(" "),e("li",[v._v("压缩")]),v._v(" "),e("li",[v._v("chunk hash、content hash")]),v._v(" "),e("li",[v._v("资源嵌入，小于10kb的图片以base64格式嵌入文件，减少http请求数量")])])])]),v._v(" "),e("h3",{attrs:{id:"preload-and-prefetch"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#preload-and-prefetch"}},[v._v("#")]),v._v(" preload and prefetch")]),v._v(" "),e("p",[v._v("浏览器决定优先级，然后进行资源的加载、解析、渲染等，preload、prefetch可以控制浏览器加载资源的方法。")]),v._v(" "),e("ul",[e("li",[v._v("preload，可以强制浏览器在不阻塞document的onload事件的情况下请求资源，页面关闭就会停止加载。预加载资源，用到时再执行")]),v._v(" "),e("li",[v._v("prefetch，可以在浏览器空闲时预加载资源，通常用于加载非首页用到的资源。页面关闭请求不会中断")])]),v._v(" "),e("p",[v._v("使用方法："),e("code",[v._v('<link ref="prefetch" href="资源地址" as="script" />')])]),v._v(" "),e("p",[v._v("加载优先级：preload需要有as属性来获得优先级，有as属性将获得最高优先级，没有则是异步请求\nas的值有：style、script、image、font、fetch、document、audio、vedio等，其中style优先级最高，script优先级为中或低")]),v._v(" "),e("p",[v._v("二次加载：")]),v._v(" "),e("ul",[e("li",[v._v("如果页面上使用这个资源时，preload资源还没下载完，不会造成二次加载，而是等待第一次下载并执行脚本。")]),v._v(" "),e("li",[v._v("请求跨域资源时推荐加上crossorigin属性，不然可能会导致资源的二次加载，比如font资源")])]),v._v(" "),e("h3",{attrs:{id:"defer-and-async"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#defer-and-async"}},[v._v("#")]),v._v(" defer and async")]),v._v(" "),e("p",[v._v("html会安装script顺序来加载执行脚本，在加载执行过程中会阻塞后续的dom渲染，script提供了async和defer这2个属性来解决dom渲染阻塞问题。")]),v._v(" "),e("p",[v._v("没有这2个属性，浏览器会在立即加载并执行脚本；")]),v._v(" "),e("p",[v._v("有 async，加载和渲染后续dom元素的过程和script的加载、执行是并行进行的（异步）")]),v._v(" "),e("p",[v._v("有 defer，加载和渲染后续dom元素的过程和script的加载是并行进行的（异步），但是script脚本的执行要在所有元素解析完成后，DOMContentLoaded(DOM构建完毕的时候触发, jQuery的ready方法包裹的就是这个事件) 事件触发前完成")]),v._v(" "),e("p",[v._v("defer、async 在网络读取上是一致的，相对于html解析来说都是异步的，defer是加载完后按顺序执行，async加载完后立即执行")]),v._v(" "),e("p",[v._v("适用场景：\ndefer：依赖页面dom元素，会被其他脚本依赖\nasync：百度统计。不关心页面中dom元素是否解析完毕，也不依赖其他脚本")]),v._v(" "),e("h3",{attrs:{id:"css"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#css"}},[v._v("#")]),v._v(" css")]),v._v(" "),e("ol",[e("li",[v._v("css文件放在head中")]),v._v(" "),e("li",[v._v("合并css资源文件，减少http请求")]),v._v(" "),e("li",[v._v("移除空的css规则")]),v._v(" "),e("li",[v._v("避免选择器层级过深")]),v._v(" "),e("li",[v._v("抽取公共样式")]),v._v(" "),e("li",[v._v("属性为0不加单位")]),v._v(" "),e("li",[v._v("属性小于1省略小数点前的0")]),v._v(" "),e("li",[v._v("雪碧图")])]),v._v(" "),e("h3",{attrs:{id:"js"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#js"}},[v._v("#")]),v._v(" js")]),v._v(" "),e("ol",[e("li",[v._v("资源文件放在body底部")]),v._v(" "),e("li",[v._v("节流、防抖")]),v._v(" "),e("li",[v._v("图片懒加载")]),v._v(" "),e("li",[v._v("动态加载")]),v._v(" "),e("li",[v._v("批量绑定事件，用事件委托，冒泡")]),v._v(" "),e("li",[v._v("对dom的样式操作记得减少回流重绘，可使用class、style.cssText")])]),v._v(" "),e("h3",{attrs:{id:"网络请求"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#网络请求"}},[v._v("#")]),v._v(" 网络请求")]),v._v(" "),e("ol",[e("li",[v._v("较少http请求量")]),v._v(" "),e("li",[v._v("浏览器缓存，公共依赖包单独打包")]),v._v(" "),e("li",[v._v("cdn托管静态文件")])]),v._v(" "),e("h3",{attrs:{id:"构建"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#构建"}},[v._v("#")]),v._v(" 构建")]),v._v(" "),e("ol",[e("li",[v._v("tree-shaking")]),v._v(" "),e("li",[v._v("从js文件提取css，并用contenthash")]),v._v(" "),e("li",[v._v("对公共依赖包单独打包")]),v._v(" "),e("li",[v._v("小图可以base64形式打包入文件中，减少http请求")])]),v._v(" "),e("p",[v._v("可以借鉴 "),e("a",{attrs:{href:"https://leohxj.gitbooks.io/front-end-database/content/preference/code-style.html",target:"_blank",rel:"noopener noreferrer"}},[v._v("这里"),e("OutboundLink")],1)])])}),[],!1,null,null,null);_.default=s.exports}}]);